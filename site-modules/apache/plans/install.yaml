parameters:
  targets:
    type: TargetSpec
  src:
    type: String

steps:
  - name: install_apache
    task: package
    targets: $targets
    parameters:
      action: install
      name: nginx
    description: "Install Apache using the packages task"
  - name: start_apache
    script: apache/start_apache.sh
    targets: $targets
    description: "Starting Apache service"
  - name: upload_homepage
    source: $src
    destination: /usr/share/nginx/html/index.html
    targets: $targets
    description: "Upload homepage"
